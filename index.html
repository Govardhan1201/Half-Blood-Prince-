<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>VIHARA - Discover India's Hidden Gems</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.9.4/leaflet.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.9.4/leaflet.min.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            --primary-dark: #134252;
            --accent-gold: #FAC496;
            --text-light: #F2F5FA;
            --text-secondary: #EBEDF0;
            --bg-dark: #0f1419;
            --success-green: #00C853;
            --error-red: #FF0000;
        }

        html, body {
            height: 100%;
            margin: 0;
            padding: 0;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: linear-gradient(135deg, #0f1419 0%, #1a2332 100%);
            color: var(--text-secondary);
            line-height: 1.6;
            overflow-x: hidden;
        }

        /* Header - Fixed at top */
        .header {
            background: rgba(19, 66, 82, 0.98);
            padding: 1rem 2rem;
            display: flex;
            justify-content: space-between;
            align-items: center;
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            z-index: 1000;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.4);
            height: 60px;
        }

        .logo {
            font-size: 1.8rem;
            font-weight: bold;
            background: linear-gradient(135deg, var(--accent-gold), #FFD9A8);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            cursor: pointer;
            white-space: nowrap;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .logo-img {
            width: 45px;
            height: 45px;
            border-radius: 8px;
            object-fit: cover;
            box-shadow: 0 2px 8px rgba(250, 196, 150, 0.3);
        }

        .logo-text {
            background: linear-gradient(135deg, var(--accent-gold), #FFD9A8);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .hamburger {
            font-size: 1.8rem;
            cursor: pointer;
            color: var(--accent-gold);
            background: none;
            border: none;
            padding: 0;
            transition: color 0.3s ease;
        }

        .hamburger:hover {
            color: #FFD9A8;
        }

        .hamburger.active {
            color: #FFD9A8;
        }

        .sidebar-overlay {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.5);
            z-index: 998;
            opacity: 0;
            transition: opacity 0.3s ease;
        }

        .sidebar-overlay.active {
            display: block;
            opacity: 1;
        }

        /* Sidebar - Hidden by default, shows on menu click */
        .sidebar {
            width: 280px;
            background: rgba(19, 66, 82, 0.98);
            border-right: 2px solid var(--accent-gold);
            height: 100vh;
            position: fixed;
            left: 0;
            top: 0;
            padding: 6rem 0 2rem 0;
            overflow-y: auto;
            transition: transform 0.3s ease;
            z-index: 999;
            transform: translateX(-100%);
        }

        .sidebar.active {
            transform: translateX(0);
        }

        .sidebar-section {
            padding: 1.5rem 1rem;
            border-bottom: 1px solid rgba(250, 196, 150, 0.2);
            cursor: pointer;
            transition: all 0.3s ease;
            user-select: none;
        }

        .sidebar-section:hover {
            background: rgba(250, 196, 150, 0.1);
            padding-left: 1.5rem;
        }

        .sidebar-section.active {
            background: rgba(250, 196, 150, 0.2);
            border-left: 4px solid var(--accent-gold);
            padding-left: calc(1rem - 3px);
        }

        .sidebar-section h3 {
            color: var(--accent-gold);
            font-size: 1.1rem;
            margin-bottom: 0.5rem;
            font-weight: 600;
        }

        .sidebar-section p {
            color: var(--text-secondary);
            font-size: 0.85rem;
        }

        /* Main Container */
        .main-container {
            margin-left: 0;
            margin-top: 60px;
            min-height: calc(100vh - 60px);
            padding: 2rem;
            transition: margin-left 0.3s ease;
        }

        .main-container.with-sidebar {
            margin-left: 280px;
        }

        /* Content Sections */
        .content-section {
            display: none;
            animation: fadeIn 0.3s ease;
        }

        .content-section.active {
            display: block;
        }

        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        /* Hero Section */
        .hero {
            text-align: center;
            padding: 3rem 2rem;
            background: linear-gradient(180deg, rgba(19, 66, 82, 0.3) 0%, rgba(10, 10, 10, 0.5) 100%);
            border-bottom: 2px solid var(--accent-gold);
            margin-bottom: 3rem;
            border-radius: 12px;
            position: relative;
            overflow: hidden;
        }

        .hero::before {
            content: '';
            position: absolute;
            top: -50%;
            right: -10%;
            width: 200px;
            height: 200px;
            background: url('https://agi-prod-file-upload-public-main-use1.s3.amazonaws.com/eed66195-312d-4eb3-9b47-6bc24edbf99b') no-repeat center;
            background-size: contain;
            opacity: 0.1;
            z-index: 0;
        }

        .hero h1 {
            font-size: 3rem;
            color: var(--text-light);
            margin-bottom: 0.5rem;
            position: relative;
            z-index: 1;
        }

        .hero .tagline {
            font-size: 1.2rem;
            color: var(--accent-gold);
            font-style: italic;
            margin-bottom: 0.5rem;
        }

        .hero .subtagline {
            font-size: 1rem;
            color: var(--text-secondary);
        }

        /* ===== ZONES HIERARCHY ===== */
        .zones-hierarchy {
            background: rgba(19, 66, 82, 0.2);
            border: 1px solid var(--accent-gold);
            border-radius: 12px;
            padding: 2rem;
            margin-bottom: 2rem;
        }

        .zones-step {
            margin-bottom: 2rem;
        }

        .zones-step h3 {
            color: var(--accent-gold);
            margin-bottom: 1rem;
            font-size: 1.1rem;
        }

        .zones-bubble-container {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
            gap: 1rem;
        }

        .zone-bubble {
            background: rgba(19, 66, 82, 0.3);
            border: 2px solid var(--accent-gold);
            border-radius: 50%;
            width: 100px;
            height: 100px;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.3s;
            text-align: center;
            padding: 0.5rem;
            font-size: 0.9rem;
            color: var(--text-light);
            font-weight: 500;
        }

        .zone-bubble:hover {
            background: var(--accent-gold);
            color: var(--primary-dark);
            transform: scale(1.1);
        }

        .zone-bubble.active {
            background: var(--accent-gold);
            color: var(--primary-dark);
            box-shadow: 0 0 20px var(--accent-gold);
        }

        .zones-list-container {
            display: flex;
            flex-wrap: wrap;
            gap: 0.7rem;
        }

        .zone-item-tag {
            background: rgba(19, 66, 82, 0.3);
            border: 1px solid var(--accent-gold);
            padding: 0.7rem 1rem;
            border-radius: 20px;
            cursor: pointer;
            transition: all 0.3s;
            color: var(--text-light);
            font-size: 0.9rem;
        }

        .zone-item-tag:hover {
            background: rgba(250, 196, 150, 0.1);
        }

        .zone-item-tag.active {
            background: var(--accent-gold);
            color: var(--primary-dark);
            font-weight: bold;
        }

        /* Map and Filters */
        .zones-map-container {
            background: rgba(19, 66, 82, 0.2);
            border: 1px solid var(--accent-gold);
            border-radius: 12px;
            padding: 1.5rem;
            margin-bottom: 2rem;
        }

        .zones-map-container h3 {
            color: var(--accent-gold);
            margin-bottom: 1rem;
            text-align: center;
        }

        #zonesMap {
            height: 500px;
            border-radius: 8px;
            margin-bottom: 1rem;
            border: 1px solid var(--accent-gold);
        }

        .map-controls {
            display: flex;
            gap: 0.5rem;
            margin-top: 1rem;
            flex-wrap: wrap;
        }

        .map-btn {
            padding: 0.6rem 1.2rem;
            background: rgba(250, 196, 150, 0.2);
            border: 1px solid var(--accent-gold);
            color: var(--accent-gold);
            border-radius: 6px;
            cursor: pointer;
            font-weight: 500;
            transition: all 0.3s;
            font-size: 0.9rem;
        }

        .map-btn:hover {
            background: var(--accent-gold);
            color: var(--primary-dark);
        }

        .map-btn.active {
            background: var(--accent-gold);
            color: var(--primary-dark);
        }

        .location-status {
            padding: 1rem;
            background: rgba(19, 66, 82, 0.3);
            border-left: 3px solid var(--accent-gold);
            border-radius: 6px;
            margin-bottom: 1rem;
            color: var(--text-secondary);
            font-size: 0.9rem;
        }

        .location-status.active {
            border-left-color: var(--success-green);
            color: var(--success-green);
        }

        .location-status.error {
            border-left-color: var(--error-red);
            color: var(--error-red);
        }

        /* Filters */
        .filters-container {
            background: rgba(19, 66, 82, 0.2);
            border: 1px solid var(--accent-gold);
            border-radius: 12px;
            padding: 2rem;
            margin-bottom: 2rem;
        }

        .filters-title {
            color: var(--accent-gold);
            font-size: 1.3rem;
            margin-bottom: 1.5rem;
            border-bottom: 2px solid var(--accent-gold);
            padding-bottom: 0.5rem;
        }

        .filters-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 1.5rem;
        }

        .filter-group {
            display: flex;
            flex-direction: column;
        }

        .filter-group label {
            color: var(--text-light);
            margin-bottom: 0.5rem;
            font-weight: 500;
            font-size: 0.9rem;
        }

        .filter-group select,
        .filter-group input {
            padding: 0.7rem;
            background: rgba(19, 66, 82, 0.3);
            border: 1px solid var(--accent-gold);
            border-radius: 6px;
            color: var(--text-light);
            font-size: 0.9rem;
            transition: border-color 0.3s;
        }

        .filter-group select:focus,
        .filter-group input:focus {
            outline: none;
            border-color: #FFD9A8;
            box-shadow: 0 0 8px rgba(250, 196, 150, 0.3);
        }

        .filter-btn {
            padding: 0.8rem 1.5rem;
            background: var(--accent-gold);
            color: var(--primary-dark);
            border: none;
            border-radius: 6px;
            cursor: pointer;
            font-weight: 600;
            transition: all 0.3s;
            grid-column: 1 / -1;
            font-size: 0.95rem;
        }

        .filter-btn:hover {
            background: #FFD9A8;
            transform: translateY(-2px);
        }

        /* Destinations Grid */
        .destinations-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
            gap: 2rem;
        }

        .destination-card {
            background: rgba(19, 66, 82, 0.2);
            border: 1px solid var(--accent-gold);
            border-radius: 12px;
            overflow: hidden;
            transition: all 0.3s;
            cursor: pointer;
        }

        .destination-card:hover {
            transform: translateY(-8px);
            box-shadow: 0 15px 40px rgba(250, 196, 150, 0.2);
        }

        .destination-image {
            width: 100%;
            height: 180px;
            background: linear-gradient(135deg, var(--primary-dark), #1a2332);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 3rem;
            color: var(--accent-gold);
        }

        .destination-info {
            padding: 1.5rem;
        }

        .destination-name {
            color: var(--accent-gold);
            font-size: 1.2rem;
            margin-bottom: 0.5rem;
        }

        .destination-desc {
            color: var(--text-secondary);
            font-size: 0.85rem;
            margin-bottom: 1rem;
            min-height: 40px;
        }

        .destination-tags {
            display: flex;
            flex-wrap: wrap;
            gap: 0.4rem;
            margin-bottom: 1rem;
        }

        .tag {
            background: rgba(250, 196, 150, 0.2);
            color: var(--accent-gold);
            padding: 0.3rem 0.7rem;
            border-radius: 20px;
            font-size: 0.7rem;
            border: 1px solid var(--accent-gold);
        }

        .destination-meta {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 0.5rem;
            font-size: 0.8rem;
            color: var(--text-secondary);
        }

        /* Converter Section */
        .converter-container {
            background: rgba(19, 66, 82, 0.2);
            border: 1px solid var(--accent-gold);
            border-radius: 12px;
            padding: 2rem;
            max-width: 1000px;
            margin: 0 auto;
        }

        .converter-title {
            color: var(--accent-gold);
            font-size: 1.5rem;
            margin-bottom: 2rem;
            text-align: center;
        }

        .converter-tabs {
            display: flex;
            flex-wrap: wrap;
            gap: 0.5rem;
            margin-bottom: 2rem;
            border-bottom: 2px solid var(--accent-gold);
        }

        .converter-tab-btn {
            padding: 0.7rem 1.2rem;
            background: transparent;
            border: none;
            color: var(--text-secondary);
            font-weight: 500;
            cursor: pointer;
            border-bottom: 3px solid transparent;
            transition: all 0.3s;
            font-size: 0.95rem;
        }

        .converter-tab-btn:hover {
            color: var(--accent-gold);
        }

        .converter-tab-btn.active {
            color: var(--accent-gold);
            border-bottom-color: var(--accent-gold);
        }

        .converter-tab {
            display: none;
            animation: fadeIn 0.3s ease;
        }

        .converter-tab.active {
            display: block;
        }

        .converter-section-header {
            grid-column: 1 / -1;
            color: var(--accent-gold);
            font-size: 1.1rem;
            font-weight: 600;
            margin-bottom: 1rem;
            padding-bottom: 1rem;
            border-bottom: 1px solid var(--accent-gold);
        }

        .converter-grid {
            display: grid;
            gap: 2rem;
        }

        .converter-row {
            display: grid;
            grid-template-columns: 1fr 2fr;
            gap: 2rem;
            align-items: center;
        }

        .converter-item {
            display: flex;
            flex-direction: column;
        }

        .converter-item label {
            color: var(--text-light);
            margin-bottom: 0.5rem;
            font-weight: 500;
            font-size: 0.95rem;
        }

        .converter-item input {
            padding: 1rem;
            background: rgba(19, 66, 82, 0.3);
            border: 2px solid var(--accent-gold);
            border-radius: 8px;
            color: var(--text-light);
            font-size: 1rem;
            transition: all 0.3s;
        }

        .converter-item input:focus {
            outline: none;
            border-color: #FFD9A8;
            box-shadow: 0 0 12px rgba(250, 196, 150, 0.3);
            background: rgba(19, 66, 82, 0.4);
        }

        .converter-result {
            padding: 0.8rem;
            background: rgba(19, 66, 82, 0.5);
            border: 1px solid var(--accent-gold);
            border-radius: 6px;
            color: var(--accent-gold);
            font-weight: bold;
            text-align: center;
        }

        .converter-result-full {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 1rem;
        }

        .result-item {
            background: rgba(19, 66, 82, 0.3);
            border: 1px solid var(--accent-gold);
            padding: 1.2rem;
            border-radius: 8px;
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 0.5rem;
        }

        .result-label {
            color: var(--text-secondary);
            font-size: 0.85rem;
            font-weight: 500;
        }

        .result-value {
            color: var(--accent-gold);
            font-size: 1.3rem;
            font-weight: bold;
        }

        @media (max-width: 768px) {
            .converter-row {
                grid-template-columns: 1fr;
            }

            .converter-result-full {
                grid-template-columns: repeat(2, 1fr);
            }

            .converter-tabs {
                gap: 0.2rem;
            }

            .converter-tab-btn {
                padding: 0.5rem 0.8rem;
                font-size: 0.8rem;
            }
        }

        /* Chatbot Section */
        .chatbot-container {
            background: rgba(19, 66, 82, 0.2);
            border: 1px solid var(--accent-gold);
            border-radius: 12px;
            padding: 2rem;
            max-width: 800px;
            margin: 0 auto;
        }

        .chatbot-title {
            color: var(--accent-gold);
            font-size: 1.5rem;
            margin-bottom: 1.5rem;
            text-align: center;
        }

        .chat-box {
            height: 450px;
            background: rgba(0, 0, 0, 0.3);
            border-radius: 8px;
            display: flex;
            flex-direction: column;
            overflow-y: auto;
            padding: 1rem;
            margin-bottom: 1rem;
            border: 1px solid var(--accent-gold);
        }

        .chat-message {
            margin-bottom: 1rem;
            padding: 0.8rem 1rem;
            border-radius: 8px;
            max-width: 80%;
            word-wrap: break-word;
        }

        .chat-message.user {
            align-self: flex-end;
            background: var(--accent-gold);
            color: var(--primary-dark);
            margin-left: 20%;
        }

        .chat-message.bot {
            align-self: flex-start;
            background: rgba(19, 66, 82, 0.4);
            color: var(--text-light);
            margin-right: 20%;
        }

        .chat-input-group {
            display: flex;
            gap: 0.8rem;
        }

        .chat-input-group input {
            flex: 1;
            padding: 0.8rem;
            background: rgba(19, 66, 82, 0.3);
            border: 1px solid var(--accent-gold);
            border-radius: 6px;
            color: var(--text-light);
        }

        .chat-input-group button {
            padding: 0.8rem 1.5rem;
            background: var(--accent-gold);
            color: var(--primary-dark);
            border: none;
            border-radius: 6px;
            cursor: pointer;
            font-weight: 600;
            transition: all 0.3s;
        }

        .chat-input-group button:hover {
            background: #FFD9A8;
            transform: scale(1.05);
        }

        .location-info-box {
            background: rgba(19, 66, 82, 0.3);
            border-left: 3px solid var(--accent-gold);
            padding: 1rem;
            margin-bottom: 1rem;
            border-radius: 6px;
            color: var(--text-secondary);
        }

        .location-info-box.success {
            border-left-color: var(--success-green);
            color: var(--success-green);
        }

        .location-info-box.error {
            border-left-color: var(--error-red);
            color: var(--error-red);
        }

        /* Responsive */
        @media (max-width: 768px) {
            .sidebar {
                width: 100vw;
                max-width: 100%;
            }

            .main-container {
                margin-left: 0;
                padding: 1rem;
            }

            .hamburger {
                display: block;
            }

            .header {
                padding: 1rem;
            }

            .logo {
                font-size: 1.4rem;
            }

            .zones-bubble-container {
                grid-template-columns: repeat(2, 1fr);
            }

            .filters-grid {
                grid-template-columns: 1fr;
            }

            .destinations-grid {
                grid-template-columns: 1fr;
            }

            .hero {
                padding: 2rem 1rem;
            }

            #zonesMap {
                height: 300px;
            }
        }

        .hidden-section {
            display: none;
        }

        .breadcrumb {
            color: var(--text-secondary);
            margin-bottom: 1rem;
            font-size: 0.9rem;
        }

        .breadcrumb span {
            color: var(--accent-gold);
            font-weight: bold;
        }

        .btn-back {
            padding: 0.5rem 1rem;
            background: rgba(250, 196, 150, 0.2);
            border: 1px solid var(--accent-gold);
            color: var(--accent-gold);
            border-radius: 6px;
            cursor: pointer;
            margin-bottom: 1rem;
            transition: all 0.3s;
        }

        .btn-back:hover {
            background: var(--accent-gold);
            color: var(--primary-dark);
        }
    </style>
</head>
<body>
    <!-- Header -->
    <div class="header">
        <div class="logo">
            <img src="https://agi-prod-file-upload-public-main-use1.s3.amazonaws.com/eed66195-312d-4eb3-9b47-6bc24edbf99b" alt="VIHARA" class="logo-img">
            <span class="logo-text">VIHARA</span>
        </div>
        <div class="hamburger" id="hamburger">‚ò∞</div>
    </div>

    <!-- Sidebar Overlay -->
    <div class="sidebar-overlay" id="sidebarOverlay"></div>

    <!-- Sidebar -->
    <div class="sidebar" id="sidebar">
        <div class="sidebar-section active" data-section="home">
            <h3>üè† Home</h3>
            <p>Welcome to VIHARA</p>
        </div>
        <div class="sidebar-section" data-section="destinations">
            <h3>üó∫Ô∏è Destinations</h3>
            <p>Explore & Filter Zones</p>
        </div>
        <div class="sidebar-section" data-section="converter">
            <h3>üí± Converter</h3>
            <p>Currency & Units</p>
        </div>
        <div class="sidebar-section" data-section="chatbot">
            <h3>ü§ñ AI Chatbot</h3>
            <p>Travel Assistant</p>
        </div>
    </div>

    <!-- Main Container -->
    <div class="main-container">

        <!-- Home Section -->
        <div class="content-section active" id="home">
            <div class="hero">
                <h1>VIHARA</h1>
                <p class="tagline">Wander the Unseen. Discover the Soul of Bharat.</p>
                <p class="subtagline">Authentic Experiences. Budget Smart. Off-Beat Adventures.</p>
            </div>
            <div style="text-align: center; padding: 3rem; position: relative; z-index: 1;">
                <div style="margin-bottom: 2rem; display: flex; justify-content: center;">
                    <img src="https://agi-prod-file-upload-public-main-use1.s3.amazonaws.com/eed66195-312d-4eb3-9b47-6bc24edbf99b" alt="VIHARA Logo" style="width: 120px; height: 120px; border-radius: 12px; box-shadow: 0 4px 20px rgba(250, 196, 150, 0.3);">
                </div>
                <h2 style="color: var(--accent-gold); margin-bottom: 1rem;">Welcome to VIHARA</h2>
                <p style="color: var(--text-secondary); margin-bottom: 2rem; max-width: 600px; margin-left: auto; margin-right: auto;">
                    Discover hidden gems across India with AI-powered recommendations, smart filters by zones, and budget-friendly travel options. Explore authentic experiences, connect with fellow travelers, and create unforgettable memories.
                </p>
                <button class="filter-btn" onclick="switchSection('destinations')" style="max-width: 200px; margin-left: auto; margin-right: auto;">Start Exploring ‚Üí</button>
            </div>
        </div>

        <!-- Destinations Section -->
        <div class="content-section" id="destinations">
            <h1 style="color: var(--text-light); margin-bottom: 1rem;">üó∫Ô∏è Explore Destinations</h1>
            
            <!-- Step 1: Select State -->
            <div class="zones-hierarchy" id="step1">
                <div class="zones-step">
                    <h3>üìç Step 1: Select State</h3>
                    <div class="zones-bubble-container" id="stateContainer">
                        <!-- States will be populated here -->
                    </div>
                </div>
            </div>

            <!-- Step 2: Select Sub-Zones -->
            <div class="zones-hierarchy hidden-section" id="step2">
                <div class="breadcrumb">
                    Selected State: <span id="selectedStateName">-</span>
                </div>
                <button class="btn-back" onclick="backToStates()">‚Üê Back to States</button>
                <div class="zones-step">
                    <h3>üéØ Step 2: Select Sub-Zones</h3>
                    <div class="zones-list-container" id="subZoneContainer">
                        <!-- Sub-zones will be populated here -->
                    </div>
                </div>
            </div>

            <!-- Zones Map -->
            <div class="zones-map-container" id="mapContainer">
                <h3>üìç Interactive Map & Your Location</h3>
                <div class="location-status" id="locationStatus">
                    <span id="locationText">üìç Click "Get My Location" to show your position on the map</span>
                </div>
                <div class="map-controls">
                    <button class="map-btn" onclick="getUserLocation()">üìç Get My Location</button>
                    <button class="map-btn" onclick="centerMapOnIndia()">üáÆüá≥ Center on India</button>
                    <button class="map-btn" onclick="toggleDestinations()">üéØ Show Destinations</button>
                </div>
                <div id="zonesMap"></div>
                <div id="locationMsg" class="location-info-box" style="display: none;"></div>
            </div>

            <!-- Filters -->
            <div class="filters-container">
                <div class="filters-title">üîç Smart Filters</div>
                <div class="filters-grid">
                    <div class="filter-group">
                        <label>Activity Type</label>
                        <select id="activityFilter">
                            <option value="">All Activities</option>
                            <option value="adventure">Adventure</option>
                            <option value="cultural">Cultural</option>
                            <option value="nature">Nature</option>
                            <option value="photography">Photography</option>
                        </select>
                    </div>
                    <div class="filter-group">
                        <label>Duration</label>
                        <select id="durationFilter">
                            <option value="">Any Duration</option>
                            <option value="short">Short (1-3 days)</option>
                            <option value="medium">Medium (4-7 days)</option>
                            <option value="long">Long (8+ days)</option>
                        </select>
                    </div>
                    <div class="filter-group">
                        <label>Transportation</label>
                        <select id="transportFilter">
                            <option value="">All Modes</option>
                            <option value="train">Train</option>
                            <option value="bus">Bus</option>
                            <option value="flight">Flight</option>
                            <option value="local">Local Transport</option>
                        </select>
                    </div>
                    <div class="filter-group">
                        <label>Accommodation</label>
                        <select id="accommodationFilter">
                            <option value="">All Types</option>
                            <option value="budget">Budget</option>
                            <option value="midrange">Mid-Range</option>
                            <option value="luxury">Luxury</option>
                        </select>
                    </div>
                    <div class="filter-group">
                        <label>Daily Budget (‚Çπ)</label>
                        <input type="number" id="budgetFilter" placeholder="Max budget" min="100">
                    </div>
                    <button class="filter-btn" onclick="applyFilters()">Apply Filters</button>
                </div>
            </div>

            <!-- Destinations Grid -->
            <div class="destinations-grid" id="destinationsGrid">
                <!-- Populated by JS -->
            </div>
        </div>

        <!-- Converter Section -->
        <div class="content-section" id="converter">
            <div class="converter-container">
                <h1 class="converter-title">üí± Universal Converter</h1>
                
                <!-- Converter Tabs -->
                <div class="converter-tabs">
                    <button class="converter-tab-btn active" onclick="switchConverterTab('currency')">üí∞ Currency</button>
                    <button class="converter-tab-btn" onclick="switchConverterTab('distance')">üìè Distance</button>
                    <button class="converter-tab-btn" onclick="switchConverterTab('temperature')">üå°Ô∏è Temperature</button>
                    <button class="converter-tab-btn" onclick="switchConverterTab('weight')">‚öñÔ∏è Weight</button>
                </div>

                <!-- Currency Converter -->
                <div class="converter-tab active" id="tab-currency">
                    <div class="converter-grid">
                        <div class="converter-section-header">Global Currency Exchange</div>
                        
                        <div class="converter-row">
                            <div class="converter-item">
                                <label>Amount (INR)</label>
                                <input type="number" id="inrAmount" placeholder="Enter amount" value="1000" oninput="convertCurrency('inr')">
                            </div>
                            <div class="converter-result-full">
                                <div class="result-item">
                                    <span class="result-label">USD</span>
                                    <span class="result-value" id="currencyUSD">$12.05</span>
                                </div>
                                <div class="result-item">
                                    <span class="result-label">EUR</span>
                                    <span class="result-value" id="currencyEUR">‚Ç¨11.11</span>
                                </div>
                                <div class="result-item">
                                    <span class="result-label">GBP</span>
                                    <span class="result-value" id="currencyGBP">¬£10.15</span>
                                </div>
                                <div class="result-item">
                                    <span class="result-label">JPY</span>
                                    <span class="result-value" id="currencyJPY">¬•1,850</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Distance Converter -->
                <div class="converter-tab" id="tab-distance">
                    <div class="converter-grid">
                        <div class="converter-section-header">Distance & Length</div>
                        
                        <div class="converter-row">
                            <div class="converter-item">
                                <label>Kilometers (KM)</label>
                                <input type="number" id="kmValue" placeholder="Enter KM" value="100" oninput="convertDistance('km')">
                            </div>
                            <div class="converter-result-full">
                                <div class="result-item">
                                    <span class="result-label">Miles</span>
                                    <span class="result-value" id="distanceMiles">62.14 mi</span>
                                </div>
                                <div class="result-item">
                                    <span class="result-label">Meters</span>
                                    <span class="result-value" id="distanceMeters">100,000 m</span>
                                </div>
                                <div class="result-item">
                                    <span class="result-label">Feet</span>
                                    <span class="result-value" id="distanceFeet">328,084 ft</span>
                                </div>
                                <div class="result-item">
                                    <span class="result-label">Nautical Miles</span>
                                    <span class="result-value" id="distanceNautical">54.00 nm</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Temperature Converter -->
                <div class="converter-tab" id="tab-temperature">
                    <div class="converter-grid">
                        <div class="converter-section-header">Temperature Conversion</div>
                        
                        <div class="converter-row">
                            <div class="converter-item">
                                <label>Celsius (¬∞C)</label>
                                <input type="number" id="celsiusValue" placeholder="Enter ¬∞C" value="25" oninput="convertTemp('celsius')">
                            </div>
                            <div class="converter-result-full">
                                <div class="result-item">
                                    <span class="result-label">Fahrenheit</span>
                                    <span class="result-value" id="tempFahrenheit">77.0¬∞F</span>
                                </div>
                                <div class="result-item">
                                    <span class="result-label">Kelvin</span>
                                    <span class="result-value" id="tempKelvin">298.15 K</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Weight Converter -->
                <div class="converter-tab" id="tab-weight">
                    <div class="converter-grid">
                        <div class="converter-section-header">Weight & Mass</div>
                        
                        <div class="converter-row">
                            <div class="converter-item">
                                <label>Kilograms (KG)</label>
                                <input type="number" id="kgValue" placeholder="Enter KG" value="70" oninput="convertWeight('kg')">
                            </div>
                            <div class="converter-result-full">
                                <div class="result-item">
                                    <span class="result-label">Pounds</span>
                                    <span class="result-value" id="weightPounds">154.32 lbs</span>
                                </div>
                                <div class="result-item">
                                    <span class="result-label">Grams</span>
                                    <span class="result-value" id="weightGrams">70,000 g</span>
                                </div>
                                <div class="result-item">
                                    <span class="result-label">Ounces</span>
                                    <span class="result-value" id="weightOunces">2,469.11 oz</span>
                                </div>
                                <div class="result-item">
                                    <span class="result-label">Stones</span>
                                    <span class="result-value" id="weightStones">11.02 st</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Chatbot Section -->
        <div class="content-section" id="chatbot">
            <div class="chatbot-container">
                <h1 class="chatbot-title">ü§ñ AI Travel Assistant</h1>
                <div class="chat-box" id="chatBox">
                    <div class="chat-message bot">üëã Hello! I'm VIHARA's AI assistant. Ask me about destinations, budget tips, activities, or anything about travel in India!</div>
                </div>
                <div class="chat-input-group">
                    <input type="text" id="chatInput" placeholder="Ask about hidden gems, budget travel, adventures..." onkeypress="if(event.key==='Enter') sendMessage()">
                    <button onclick="sendMessage()">Send</button>
                </div>
            </div>
        </div>

    </div>

    <script>
        // ===== STATE & ZONES HIERARCHY =====
        const statesData = {
            'Andhra Pradesh': {
                coords: [[13.2, 79.5], [17.5, 84.5]],
                color: '#3498db',
                subZones: [
                    'Vizag',
                    'Araku',
                    'Rayalaseema',
                    'North Godavari',
                    'Konaseema',
                    'Chitoor',
                    'South Rayalaseema',
                    'Srikakulam',
                    'North Coastal Zone',
                    'Vizianagaram',
                    'Ananthapur District Zone'
                ]
            },
            'Telangana': {
                coords: [[15.5, 78.0], [19.0, 81.5]],
                color: '#e74c3c',
                subZones: ['Hyderabad Zone', 'Warangal Zone', 'Khammam Zone', 'Mahbubnagar Zone']
            },
            'Rajasthan': {
                coords: [[23.0, 72.0], [28.5, 78.5]],
                color: '#f39c12',
                subZones: ['Jaipur Zone', 'Jodhpur Zone', 'Udaipur Zone', 'Bikaner Zone', 'Pushkar Zone']
            },
            'Goa': {
                coords: [[14.5, 73.5], [15.5, 74.0]],
                color: '#2ecc71',
                subZones: ['North Goa', 'South Goa', 'Coastal Zone']
            }
        };

        const destinations = [
            {
                name: "Vizag Beach",
                state: "Andhra Pradesh",
                subZone: "Vizag",
                desc: "Beautiful coastal city with beaches",
                lat: 17.6869, lng: 83.2185,
                activity: "nature",
                duration: "short",
                transport: "flight",
                accommodation: "midrange",
                budget: 1000,
                tags: ["Beach", "Nature"],
                emoji: "üèñÔ∏è"
            },
            {
                name: "Araku Valley",
                state: "Andhra Pradesh",
                subZone: "Araku",
                desc: "Scenic hill station with tribal culture",
                lat: 18.3481, lng: 82.8005,
                activity: "cultural",
                duration: "short",
                transport: "train",
                accommodation: "budget",
                budget: 600,
                tags: ["Culture", "Nature"],
                emoji: "üèîÔ∏è"
            },
            {
                name: "Tirupati Temple",
                state: "Andhra Pradesh",
                subZone: "Chitoor",
                desc: "Sacred temple in the hills",
                lat: 13.1939, lng: 79.8456,
                activity: "cultural",
                duration: "short",
                transport: "train",
                accommodation: "budget",
                budget: 500,
                tags: ["Religious", "Culture"],
                emoji: "üõï"
            },
            {
                name: "Hyderabad City",
                state: "Telangana",
                subZone: "Hyderabad Zone",
                desc: "Modern city with historical monuments",
                lat: 17.3850, lng: 78.4867,
                activity: "cultural",
                duration: "medium",
                transport: "flight",
                accommodation: "midrange",
                budget: 1100,
                tags: ["City", "Culture"],
                emoji: "üèôÔ∏è"
            },
            {
                name: "Jaipur Pink City",
                state: "Rajasthan",
                subZone: "Jaipur Zone",
                desc: "Historic pink city with palace",
                lat: 26.9124, lng: 75.7873,
                activity: "cultural",
                duration: "medium",
                transport: "flight",
                accommodation: "midrange",
                budget: 900,
                tags: ["Architecture", "History"],
                emoji: "üè∞"
            },
            {
                name: "Jodhpur Fort",
                state: "Rajasthan",
                subZone: "Jodhpur Zone",
                desc: "Majestic fort in the desert",
                lat: 26.2389, lng: 73.0243,
                activity: "cultural",
                duration: "short",
                transport: "flight",
                accommodation: "budget",
                budget: 800,
                tags: ["Fort", "Adventure"],
                emoji: "üèØ"
            },
            {
                name: "Udaipur Palace",
                state: "Rajasthan",
                subZone: "Udaipur Zone",
                desc: "Lake palace with romantic ambiance",
                lat: 24.5854, lng: 73.7125,
                activity: "cultural",
                duration: "medium",
                transport: "flight",
                accommodation: "luxury",
                budget: 1800,
                tags: ["Palace", "Romantic"],
                emoji: "üíé"
            },
            {
                name: "Goa Beaches",
                state: "Goa",
                subZone: "North Goa",
                desc: "Tropical beaches with vibrant culture",
                lat: 15.2993, lng: 73.8243,
                activity: "adventure",
                duration: "medium",
                transport: "flight",
                accommodation: "midrange",
                budget: 1200,
                tags: ["Beach", "Party"],
                emoji: "üéâ"
            }
        ];

        let selectedState = null;
        let selectedSubZone = null;

        // Initialize states
        function initializeStates() {
            const container = document.getElementById('stateContainer');
            container.innerHTML = '';
            
            Object.keys(statesData).forEach(state => {
                const bubble = document.createElement('div');
                bubble.className = 'zone-bubble';
                bubble.textContent = state;
                bubble.onclick = () => selectState(state);
                container.appendChild(bubble);
            });
        }

        function selectState(state) {
            selectedState = state;
            selectedSubZone = null;
            
            document.getElementById('step1').classList.add('hidden-section');
            document.getElementById('step2').classList.remove('hidden-section');
            document.getElementById('selectedStateName').textContent = state;
            
            renderSubZones(state);
            applyFilters();
        }

        function renderSubZones(state) {
            const container = document.getElementById('subZoneContainer');
            container.innerHTML = '';
            
            statesData[state].subZones.forEach(zone => {
                const tag = document.createElement('div');
                tag.className = 'zone-item-tag';
                tag.textContent = zone;
                tag.onclick = () => selectSubZone(zone);
                container.appendChild(tag);
            });
        }

        function selectSubZone(zone) {
            selectedSubZone = zone;
            
            document.querySelectorAll('.zone-item-tag').forEach(tag => tag.classList.remove('active'));
            event.target.classList.add('active');
            
            applyFilters();
        }

        function backToStates() {
            selectedState = null;
            selectedSubZone = null;
            
            document.getElementById('step1').classList.remove('hidden-section');
            document.getElementById('step2').classList.add('hidden-section');
            
            renderDestinations(destinations);
        }

        // ===== SIDEBAR & NAVIGATION =====
        const hamburger = document.getElementById('hamburger');
        const sidebar = document.getElementById('sidebar');

        const sidebarOverlay = document.getElementById('sidebarOverlay');
        let mapInstance = null;
        let userMarker = null;
        let destinationMarkers = [];

        // Sidebar Toggle
        hamburger.addEventListener('click', function(e) {
            e.stopPropagation();
            hamburger.classList.toggle('active');
            sidebar.classList.toggle('active');
            sidebarOverlay.classList.toggle('active');
        });

        sidebarOverlay.addEventListener('click', function() {
            hamburger.classList.remove('active');
            sidebar.classList.remove('active');
            sidebarOverlay.classList.remove('active');
        });

        // Close sidebar when clicking menu items
        document.querySelectorAll('.sidebar-section').forEach(section => {
            section.addEventListener('click', function(e) {
                hamburger.classList.remove('active');
                sidebar.classList.remove('active');
                sidebarOverlay.classList.remove('active');
            });
        });

        function switchSection(sectionId) {
            document.querySelectorAll('.content-section').forEach(s => s.classList.remove('active'));
            document.querySelectorAll('.sidebar-section').forEach(s => s.classList.remove('active'));
            
            document.getElementById(sectionId).classList.add('active');
            document.querySelector(`[data-section="${sectionId}"]`).classList.add('active');
            
            if (window.innerWidth <= 768) {
                sidebar.classList.add('hidden');
            }
        }

        document.querySelectorAll('.sidebar-section').forEach(section => {
            section.addEventListener('click', function() {
                const sectionId = this.getAttribute('data-section');
                switchSection(sectionId);
            });
        });

        // ===== DESTINATIONS RENDERING =====
        function renderDestinations(items) {
            const grid = document.getElementById('destinationsGrid');
            grid.innerHTML = '';

            if (items.length === 0) {
                grid.innerHTML = '<div style="grid-column: 1/-1; text-align: center; padding: 2rem; color: var(--accent-gold);">No destinations match your filters. Try adjusting preferences!</div>';
                return;
            }

            items.forEach(dest => {
                const card = document.createElement('div');
                card.className = 'destination-card';
                card.innerHTML = `
                    <div class="destination-image">${dest.emoji}</div>
                    <div class="destination-info">
                        <div class="destination-name">${dest.name}</div>
                        <div style="font-size: 0.8rem; color: var(--text-secondary); margin-bottom: 0.5rem;">${dest.state}</div>
                        <div class="destination-desc">${dest.desc}</div>
                        <div class="destination-tags">
                            ${dest.tags.map(tag => `<span class="tag">${tag}</span>`).join('')}
                        </div>
                        <div class="destination-meta">
                            <div>üí∞ ‚Çπ${dest.budget}/day</div>
                            <div>‚è±Ô∏è ${dest.duration}</div>
                        </div>
                    </div>
                `;
                grid.appendChild(card);
            });
        }

        function applyFilters() {
            const activity = document.getElementById('activityFilter').value;
            const duration = document.getElementById('durationFilter').value;
            const transport = document.getElementById('transportFilter').value;
            const accommodation = document.getElementById('accommodationFilter').value;
            const maxBudget = parseInt(document.getElementById('budgetFilter').value) || 10000;

            let filtered = destinations.filter(d => {
                if (selectedState && d.state !== selectedState) return false;
                if (selectedSubZone && d.subZone !== selectedSubZone) return false;
                if (activity && d.activity !== activity) return false;
                if (duration && d.duration !== duration) return false;
                if (transport && d.transport !== transport) return false;
                if (accommodation && d.accommodation !== accommodation) return false;
                if (d.budget > maxBudget) return false;
                return true;
            });

            renderDestinations(filtered);
        }

        // ===== CONVERTER TAB SWITCHING =====
        function switchConverterTab(tabName) {
            // Hide all tabs
            document.querySelectorAll('.converter-tab').forEach(tab => tab.classList.remove('active'));
            document.querySelectorAll('.converter-tab-btn').forEach(btn => btn.classList.remove('active'));
            
            // Show selected tab
            document.getElementById(`tab-${tabName}`).classList.add('active');
            event.target.classList.add('active');
        }

        // ===== CURRENCY CONVERTER =====
        function convertCurrency(from) {
            const amount = parseFloat(document.getElementById('inrAmount').value) || 0;
            
            // Exchange rates (INR base)
            const rates = {
                usd: 1 / 83,
                eur: 1 / 90,
                gbp: 1 / 105,
                jpy: 1 / 0.55
            };
            
            document.getElementById('currencyUSD').textContent = `$${(amount * rates.usd).toFixed(2)}`;
            document.getElementById('currencyEUR').textContent = `‚Ç¨${(amount * rates.eur).toFixed(2)}`;
            document.getElementById('currencyGBP').textContent = `¬£${(amount * rates.gbp).toFixed(2)}`;
            document.getElementById('currencyJPY').textContent = `¬•${(amount * rates.jpy).toLocaleString('en-IN', {maximumFractionDigits: 0})}`;
        }

        // ===== DISTANCE CONVERTER =====
        function convertDistance(from) {
            const km = parseFloat(document.getElementById('kmValue').value) || 0;
            
            document.getElementById('distanceMiles').textContent = `${(km * 0.621371).toFixed(2)} mi`;
            document.getElementById('distanceMeters').textContent = `${(km * 1000).toLocaleString('en-IN')} m`;
            document.getElementById('distanceFeet').textContent = `${(km * 3280.84).toLocaleString('en-IN')} ft`;
            document.getElementById('distanceNautical').textContent = `${(km * 0.539957).toFixed(2)} nm`;
        }

        // ===== TEMPERATURE CONVERTER =====
        function convertTemp(from) {
            const celsius = parseFloat(document.getElementById('celsiusValue').value) || 0;
            const fahrenheit = (celsius * 9/5) + 32;
            const kelvin = celsius + 273.15;
            
            document.getElementById('tempFahrenheit').textContent = `${fahrenheit.toFixed(1)}¬∞F`;
            document.getElementById('tempKelvin').textContent = `${kelvin.toFixed(2)} K`;
        }

        // ===== WEIGHT CONVERTER =====
        function convertWeight(from) {
            const kg = parseFloat(document.getElementById('kgValue').value) || 0;
            
            document.getElementById('weightPounds').textContent = `${(kg * 2.20462).toFixed(2)} lbs`;
            document.getElementById('weightGrams').textContent = `${(kg * 1000).toLocaleString('en-IN')} g`;
            document.getElementById('weightOunces').textContent = `${(kg * 35.274).toFixed(2)} oz`;
            document.getElementById('weightStones').textContent = `${(kg / 6.35029).toFixed(2)} st`;
        }

        // Initialize all converters
        convertCurrency('inr');
        convertDistance('km');
        convertTemp('celsius');
        convertWeight('kg');

        // ===== CHATBOT =====
        const botResponses = {
            'hidden': 'üéØ Check out Araku Valley, Vizag, or lesser-known zones in Rajasthan!',
            'budget': 'üí∞ Tirupati (‚Çπ500), Araku (‚Çπ600), Jodhpur (‚Çπ800) are budget-friendly!',
            'adventure': 'üèîÔ∏è Araku Valley, Jodhpur, and Goa have amazing adventure activities!',
            'photography': 'üì∑ Udaipur Palace, Jaipur, and Goa beaches are photography hotspots!',
            'cultural': 'üèõÔ∏è Tirupati, Hyderabad, and Jaipur offer rich cultural experiences!',
            'beach': 'üèñÔ∏è Vizag and Goa have stunning beaches with vibrant cultures!',
            'default': 'üëã Ask me about destinations, budgets, activities, or travel tips!'
        };

        function sendMessage() {
            const input = document.getElementById('chatInput');
            const message = input.value.trim();
            if (!message) return;

            const chatBox = document.getElementById('chatBox');
            const userMsg = document.createElement('div');
            userMsg.className = 'chat-message user';
            userMsg.textContent = message;
            chatBox.appendChild(userMsg);

            setTimeout(() => {
                const lowerMsg = message.toLowerCase();
                let response = botResponses.default;
                
                if (lowerMsg.includes('hidden') || lowerMsg.includes('gem')) response = botResponses.hidden;
                else if (lowerMsg.includes('budget') || lowerMsg.includes('cheap')) response = botResponses.budget;
                else if (lowerMsg.includes('adventure') || lowerMsg.includes('trek')) response = botResponses.adventure;
                else if (lowerMsg.includes('photo')) response = botResponses.photography;
                else if (lowerMsg.includes('cultural') || lowerMsg.includes('culture')) response = botResponses.cultural;
                else if (lowerMsg.includes('beach')) response = botResponses.beach;

                const botMsg = document.createElement('div');
                botMsg.className = 'chat-message bot';
                botMsg.textContent = response;
                chatBox.appendChild(botMsg);
                chatBox.scrollTop = chatBox.scrollHeight;
            }, 300);

            input.value = '';
        }

        // ===== MAP INITIALIZATION & GPS =====
        function initializeMap() {
            if (mapInstance) return;
            
            // Initialize Leaflet map centered on India
            mapInstance = L.map('zonesMap').setView([20.5937, 78.9629], 5);
            
            // Add OpenStreetMap tiles
            L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
                attribution: '¬© OpenStreetMap contributors',
                maxZoom: 19
            }).addTo(mapInstance);
            
            // Add destination markers
            destinations.forEach(dest => {
                const marker = L.circleMarker([dest.lat, dest.lng], {
                    radius: 8,
                    fillColor: '#FAC496',
                    color: '#134252',
                    weight: 2,
                    opacity: 1,
                    fillOpacity: 0.8
                }).addTo(mapInstance);
                
                marker.bindPopup(`
                    <div style="color: #134252; font-weight: bold;">
                        ${dest.emoji} ${dest.name}<br/>
                        <span style="font-size: 0.9rem;">‚Çπ${dest.budget}/day</span>
                    </div>
                `, {className: 'custom-popup'});
                
                destinationMarkers.push(marker);
            });
            
            // Add state boundaries (simplified)
            Object.keys(statesData).forEach(state => {
                const bounds = statesData[state].coords;
                const rect = L.rectangle(bounds, {
                    color: '#FAC496',
                    weight: 2,
                    opacity: 0.3,
                    fill: true,
                    fillColor: '#134252',
                    fillOpacity: 0.1
                }).addTo(mapInstance);
                
                rect.bindPopup(`<strong>${state}</strong>`);
            });
        }

        function getUserLocation() {
            const locationStatus = document.getElementById('locationStatus');
            const locationText = document.getElementById('locationText');
            
            if (!navigator.geolocation) {
                locationStatus.classList.add('error');
                locationText.textContent = '‚ùå Geolocation not supported by your browser';
                return;
            }
            
            locationText.textContent = '‚è≥ Getting your location...';
            locationStatus.classList.remove('error', 'active');
            
            navigator.geolocation.getCurrentPosition(
                function(position) {
                    const lat = position.coords.latitude;
                    const lng = position.coords.longitude;
                    const accuracy = position.coords.accuracy;
                    
                    if (!mapInstance) initializeMap();
                    
                    // Remove old user marker
                    if (userMarker) mapInstance.removeLayer(userMarker);
                    
                    // Add new user marker
                    userMarker = L.circleMarker([lat, lng], {
                        radius: 10,
                        fillColor: '#00C853',
                        color: '#fff',
                        weight: 3,
                        opacity: 1,
                        fillOpacity: 0.9
                    }).addTo(mapInstance);
                    
                    // Add accuracy circle
                    L.circle([lat, lng], {
                        radius: accuracy,
                        color: '#00C853',
                        weight: 1,
                        opacity: 0.3,
                        fillColor: '#00C853',
                        fillOpacity: 0.1
                    }).addTo(mapInstance);
                    
                    userMarker.bindPopup(`
                        <div style="color: #134252; font-weight: bold;">
                            üìç Your Location<br/>
                            <span style="font-size: 0.85rem;">Accuracy: ¬±${Math.round(accuracy)}m</span>
                        </div>
                    `, {className: 'custom-popup'});
                    
                    mapInstance.setView([lat, lng], 10);
                    
                    // Update status
                    locationStatus.classList.add('active');
                    locationText.textContent = `‚úÖ Your location found! Latitude: ${lat.toFixed(4)}, Longitude: ${lng.toFixed(4)}`;
                },
                function(error) {
                    locationStatus.classList.add('error');
                    let errorMsg = '‚ùå Unable to get location';
                    
                    switch(error.code) {
                        case error.PERMISSION_DENIED:
                            errorMsg = '‚ùå Location permission denied. Enable in browser settings.';
                            break;
                        case error.POSITION_UNAVAILABLE:
                            errorMsg = '‚ùå Location information unavailable.';
                            break;
                        case error.TIMEOUT:
                            errorMsg = '‚ùå Location request timeout.';
                            break;
                    }
                    
                    locationText.textContent = errorMsg;
                },
                {
                    enableHighAccuracy: true,
                    timeout: 10000,
                    maximumAge: 0
                }
            );
        }

        function centerMapOnIndia() {
            if (!mapInstance) initializeMap();
            mapInstance.setView([20.5937, 78.9629], 5);
        }

        function toggleDestinations() {
            if (!mapInstance) initializeMap();
            
            const btn = event.target;
            btn.classList.toggle('active');
            
            if (btn.classList.contains('active')) {
                destinationMarkers.forEach(marker => marker.setStyle({fillOpacity: 0.9}));
                btn.textContent = 'üéØ Hide Destinations';
            } else {
                destinationMarkers.forEach(marker => marker.setStyle({fillOpacity: 0.3}));
                btn.textContent = 'üéØ Show Destinations';
            }
        }

        // Initialize
        initializeStates();
        renderDestinations(destinations);
    </script>
</body>
</html>